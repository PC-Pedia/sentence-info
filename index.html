<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Sentence Info</title>
	<style>
		*{box-sizing: border-box;}
		html, body{
			height: 100%;
			max-width: 800px;
			margin: 0 auto;
			font-family: tahoma;
			font-size: .9em;
			margin-bottom: 70px;
		}
		h2{
			text-align: right;
		}
		#textarea{
			margin: 0;
			width: 100%;
			resize-x: none;
			min-height: 100px;
			font-size: 12px;
			padding: 6px;
		}
		#textarea:focus{
			outline: none;
		}
		.info > div{
			color: #C0392B;
			font-size: 12px;
			font-weight: bold;
			padding: 15px;
			min-height: 50px;
		}
		footer{
			position: fixed;
			width: 100%;
			left: 0;
			bottom: 0;
			padding: 10px;
			background: rgba(255,255,255,.5);
		}
	</style>
</head>
<body dir="rtl">
	<h2>اطلاعات جمله!</h2>
	<p>
		متن فارسی خود را در کادر زیر وارد کنید و اطلاعات نگارشی آن را ببینید!
	</p>
	<p> امکانات فعلی: </p>
	<ul>
		<li> حروف غایب </li>
		<li> حروف استفاده شده </li>
		<li> تعداد کاراکترها </li>
		<li> تعداد کلمه‌ها </li>
		<li> تعداد نقطه‌ها </li>
	</ul>
	<br>
	
	<textarea id="textarea" placeholder="جمله خود را وارد کنید"></textarea>
	<div class="info">حروف غایب:
	<div id="missed-letters"></div>
	</div>
	<div class="info"> حروف غایب در صورت برابری ـص و ص یا صـ و ـصـ
	<div id="missed-letters-gliph"></div>
	</div>
	
	<div class="info">حروف استفاده شده:
	<div id="used-letters"></div>
	</div>
	
	<div class="info">تعداد کاراکترها:
	<div id="length"></div>
	</div>
	
	<div class="info">تعداد کلمه‌ها
	<div id="words-length"></div>
	</div>
	<div class="info">تعداد نقطه‌ها
	<div id="dots-length"></div>
	</div>

	<footer>
		ایجاد شده توسط امیر مومنیان: <a href="https://twitter.com/nainemom">توییتر</a>، <a href="https://github.com/nainemom/sentence-info">گیت‌هاب</a>، <a href="http://morde.ir">وبلاگ</a>
	</footer>
	
	<script src="sentence-info.js"></script>
	<script>
		var textarea = document.getElementById('textarea');
		var missedLettersElem = document.getElementById('missed-letters');
		var lengthElem = document.getElementById('length');

		
/*		var sentence = new Sentence(textarea.value);
		textarea.onkeyup = function(){
			sentence.val( textarea.value );
			
			lengthElem.innerHTML = sentence.len();
			missedLettersElem.innerHTML = sentence.missedLetters(true);
			
			//var i,j;
			//var sentence = textarea.value;
			//var missed = missedLetters(textarea.value);
			//missedLettersElem.innerHTML = '';
			//for( i = 0; i < missed.length; i++ ){
			//	missedLettersElem.innerHTML+= (missed[i].type == 'middle' || missed[i].type == 'end'? 'ـ': '') + missed[i].letter +  (missed[i].type == 'middle' || missed[i].type == 'start'? 'ـ': '') + ' ';
			//}
			
			//lengthElem.innerHTML = sentence.length;
			
		};
		textarea.onkeyup(); */
		
		var sentence = new NaiSentence();
		
		sentence.val = textarea.value;
		textarea.onkeyup = function(){
			sentence.val = textarea.value;
			
			document.getElementById('missed-letters').innerHTML = sentence.missedLetters().join(' ');
			document.getElementById('missed-letters-gliph').innerHTML = sentence.missedLetters(true,true).join(' ');
			document.getElementById('used-letters').innerHTML = sentence.usedLetters().join(' ');
			document.getElementById('length').innerHTML = sentence.val.length;
			document.getElementById('words-length').innerHTML = sentence.wordsLength();
			document.getElementById('dots-length').innerHTML = sentence.dotsLength();
		}
		textarea.onkeyup();

	</script>
</body>
</html>